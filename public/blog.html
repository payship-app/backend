<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MyPayship Blog</title>
  <link rel="stylesheet" href="blog.css" />
</head>
<body>

<!-- HERO SECTION -->
<section class="hero">
  <h1>Welcome to Our Finance Insights Blog</h1>
  <p>Latest insights on payments, fintech, and global commerce.</p>
</section>

<!-- POSTS GRID -->
<section class="posts" id="posts"></section>

<!-- PAGINATION -->
<div class="pagination">
  <button onclick="changePage(-1)">Previous</button>
  <button onclick="changePage(1)">Next</button>
</div>

<script>
let currentPage = 1;
const postsContainer = document.getElementById("posts");

// Load posts for a page
function loadPosts() {
  fetch("https://backend-ob2l.onrender.com/api/posts")
    .then(res => res.json())
    .then(posts => {
      postsContainer.innerHTML = "";

      if (posts.length === 0 && currentPage > 1) {
        currentPage--;
        return;
      }

      posts.forEach(post => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <img src="${post.imageUrl}" alt="${post.title}" />
          <div class="card-body">
            <span class="tag">Finance</span>
            <h3>${post.title}</h3>
            <p>${post.content.substring(0, 120)}...</p>
            <a href="post.html?id=${post._id}" class="btn">See More</a>
          </div>
        `;

        postsContainer.appendChild(card);
      });
    })
    .catch(err => console.error("Failed to load posts", err));
}

// Change page
function changePage(direction) {
  currentPage += direction;
  if (currentPage < 1) currentPage = 1;
  loadPosts();
}

// Initial load
loadPosts();
</script>

</body>
</html>

